#:import rgba kivy.utils.get_color_from_hex

ScreenManagement:
    ProblemInputScreen:
        name: "problem_input"
    ProblemLoaderScreen:
        name: "problem_loader"

<ProblemInputScreen>:
    couriers: couriers_id
    vehicles: vehicles_id
    packages: packages_id
    json_path: json_path_id

    GridLayout:
        cols: 1
        padding: 30
        spacing: 20

        Label:
            text: "Problem Generator"
            font_size: '28sp'
            bold: True
            size_hint_y: None
            height: 50
            halign: 'center'
            valign: 'middle'
            text_size: self.size

        GridLayout:
            cols: 2
            spacing: 12
            row_default_height: 40
            row_force_default: True

            Label:
                text: "JSON file path:"
                font_size: '16sp'
            TextInput:
                id: json_path_id
                multiline: False
                hint_text: "config/base.json"
                text: "config/base.json"

            Label:
                text: "Couriers:"
                font_size: '16sp'
            TextInput:
                id: couriers_id
                multiline: False
                hint_text: "5"
                text: "5"

            Label:
                text: "Vehicles:"
                font_size: '16sp'
            TextInput:
                id: vehicles_id
                multiline: False
                hint_text: "3"
                text: "3"

            Label:
                text: "Packages:"
                font_size: '16sp'
            TextInput:
                id: packages_id
                multiline: False
                hint_text: "20"
                text: "20"

        BoxLayout:
            size_hint_y: None
            height: 50
            spacing: 20

            Button:
                text: "Generate"
                font_size: '18sp'
                background_color: (0.1, 0.5, 0.9, 1)
                color: (1, 1, 1, 1)
                background_normal: ''
                border: (12, 12, 12, 12)
                on_press: root.generate()

            Button:
                text: "Go to the loader"
                font_size: '18sp'
                background_color: (0.1, 0.5, 0.3, 1)
                color: (1, 1, 1, 1)
                background_normal: ''
                border: (12, 12, 12, 12)
                on_press: app.root.current = "problem_loader"

<ProblemLoaderScreen>:
    json_path: json_path_id
    solutions: solutions_id
    attempts: attempts_id
    iterations: iterations_id

    GridLayout:
        cols: 1
        padding: 30
        spacing: 20

        Label:
            text: "Problem Loader"
            font_size: '28sp'
            bold: True
            size_hint_y: None
            height: 50
            halign: 'center'
            valign: 'middle'
            text_size: self.size

        GridLayout:
            cols: 2
            spacing: 12
            row_default_height: 40
            row_force_default: True

            Label:
                text: "JSON file path:"
                font_size: '16sp'
            TextInput:
                id: json_path_id
                multiline: False
                hint_text: "config/base.json"
                text: "config/base.json"

            Label:
                text: "Solutions:"
                font_size: '16sp'
            TextInput:
                id: solutions_id
                multiline: False
                hint_text: "10"
                text: "10"

            Label:
                text: "Attempts:"
                font_size: '16sp'
            TextInput:
                id: attempts_id
                multiline: False
                hint_text: "1000"
                text: "1000"

            Label:
                text: "Iterations:"
                font_size: '16sp'
            TextInput:
                id: iterations_id
                multiline: False
                hint_text: "500"
                text: "500"

        BoxLayout:
            size_hint_y: None
            height: 50
            spacing: 20

            Button:
                text: "Back to Generator"
                font_size: '18sp'
                background_color: (0.6, 0.6, 0.6, 1)
                color: (1, 1, 1, 1)
                background_normal: ''
                border: (12, 12, 12, 12)
                on_press: app.root.current = "problem_input"

            Button:
                text: "Run"
                font_size: '18sp'
                background_color: (0.1, 0.5, 0.9, 1)
                color: (1, 1, 1, 1)
                background_normal: ''
                border: (12, 12, 12, 12)
                on_press: root.run_problem()
                
<GAAnimationScreen>:
    BoxLayout:
        id: plot_box
        orientation: 'vertical'

<InfoPopup@Popup>:
    title: "Error"
    size_hint: None, None
    size: 400, 200
    auto_dismiss: False

    BoxLayout:
        orientation: 'vertical'
        spacing: 10
        padding: 10

        Label:
            id: message_label
            text: "Default error message"
            text_size: self.width, None
            halign: 'center'
            valign: 'middle'

        Button:
            text: "Close"
            size_hint_y: None
            height: '40dp'
            on_release: root.dismiss()
